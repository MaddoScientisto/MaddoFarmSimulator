"use strict";var harvestMaddoApp=angular.module("harvestMaddoApp",["harvestMaddoFilters"]),cazzochetesefrega=function(e){Object.assign(this,e)};cazzochetesefrega.prototype.just=function(){},harvestMaddoApp.controller("HarvestMaddoCtrl",["$scope","$http",function(e,t){t.get("crops/crops.json").success(function(t){e.crops=t.map(function(e){return new cazzochetesefrega(e)})}),e.buyCrop=function(t){if(e.player.money>=t.basePrice){e.player.money-=t.basePrice;var r=e.player.inventory,n=r.find(function(e){return e.name==t.name});n?n.amount+=1:r.push({name:t.name,description:t.description,amount:1})}},e.plantCrop=function(t){var r=e.crops.find(function(e){return e.name==t.name});if(!r)return!1;var n=e.field,a=n.tilled,o=n.crops.length;if(a>o){var i={name:r.name,id:n.cropsIdCount,growthStatus:r.growthStatus,maxGrowth:r.maxGrowth,growthRate:r.growthRate,sellPrice:r.sellPrice,watered:!1,mature:!1,water:function(){!this.watered&&e.player.canExecuteAction(5)&&(this.watered=!0,e.player.subtractHealth(5))},sell:function(){if(this.mature){var t=this;e.player.shipped.push(this),n.crops.splice(n.crops.findIndex(function(e){return e.id==t.id}),1)}}};return n.crops.push(i),n.cropsIdCount++,t.amount-=1,t.amount<1&&e.player.inventory.splice(e.player.inventory.findIndex(function(e){return e.name==t.name}),1),!0}},e.waterAllCrops=function(){e.field.crops.forEach(function(e){e.water()},this)},e.advanceDay=function(){for(e.field.crops.forEach(function(e){!e.mature&&e.watered&&(e.watered=!1,e.growthStatus+=e.growthRate,e.growthStatus>=e.maxGrowth&&(e.mature=!0,e.growthStatus=e.maxGrowth))},this),e.player.currentHealth=e.player.maxHealth;e.player.shipped.length>0;){var t=e.player.shipped.pop();e.player.money+=t.sellPrice}e.environment.day+=1,e.environment.day>30&&(e.environment.day=1,e.environment.season+=1,e.environment.season>4&&(e.environment.season=1))},e.environment={season:1,day:1,year:1},e.player={name:"Maddo",currentHealth:50,maxHealth:50,money:100,inventory:[],shipped:[],canExecuteAction:function(t){return e.player.currentHealth>=t},subtractHealth:function(t){e.player.currentHealth-=t}},e.field={tiles:100,rocks:50,wood:20,weed:20,free:10,tilled:0,cropsIdCount:0,crops:[],till:function(){var t=5;e.field.free>0&&e.player.canExecuteAction(t)&&(e.field.free-=1,e.field.tilled+=1,e.player.subtractHealth(t))},breakRock:function(){var t=10;e.field.rocks>0&&e.player.canExecuteAction(t)&&(e.field.rocks-=1,e.field.free+=1,e.player.subtractHealth(t))}}}]);